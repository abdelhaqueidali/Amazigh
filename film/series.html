<!DOCTYPE html>
<html>
<head>
<title>YouTube Links</title>
<style>
body {
  font-family: sans-serif;
  margin: 20px;
}

h2 {
  margin-top: 20px;
}

ul {
  list-style-type: none;
  padding: 0;
}

li {
  margin-bottom: 5px;
}

a {
  text-decoration: none;
  color: blue;
}
</style>
</head>
<body>

<h1>YouTube Links</h1>

<div id="content">
  <!-- Content will be loaded here by JavaScript -->
</div>

<script>
  function loadAndDisplayData() {
    fetch('data.txt')
      .then(response => response.text())
      .then(data => {
        const lines = data.split('\n');
        let currentSection = null;
        let outputHTML = '';

        for (const line of lines) {
          const trimmedLine = line.trim();

          if (!trimmedLine) continue; // Skip empty lines

          if (trimmedLine.startsWith('[')) {
            // Section Heading
            currentSection = trimmedLine.slice(1, -1); // Remove brackets
            outputHTML += `<h2>${currentSection}</h2><ul>`;
          } else if (trimmedLine.startsWith('Episode')) {
              // Extract Episode Number and URL
              const [episodeInfo, url] = trimmedLine.split('|');
              const episodeNumber = episodeInfo.trim();
              const videoUrl = url.trim();

              outputHTML += `<li>${episodeNumber}: <a href="${videoUrl}" target="_blank">${videoUrl}</a></li>`;
          } else if (trimmedLine.startsWith('https://www.youtube.com')) {
            // Single URL (boutfounast case)
            outputHTML += `<li><a href="${trimmedLine}" target="_blank">${trimmedLine}</a></li>`;

          }
           else{
            console.warn("Skipping line:", trimmedLine);  //Debug, handle unexpected lines
          }
        }

        if (currentSection) {
          outputHTML += '</ul>'; // Close the last list if it exists.
        }

        document.getElementById('content').innerHTML = outputHTML;
      })
      .catch(error => {
        console.error('Error loading data.txt:', error);
        document.getElementById('content').innerHTML = '<p>Error loading data. Please make sure data.txt exists and is in the same directory.</p>';
      });
  }

  // Load the data when the page loads
  window.onload = loadAndDisplayData;
</script>

</body>
</html>
